---
title: Tools
description: Give Claude the ability to take actions in your application
---

# Tools

Tools let Claude call functions that execute in your application - query databases, call APIs, interact with UI elements, or perform any action your app needs.

## How It Works

When you define a tool with a handler, the handler runs in **your application** (not on the server). Here's the flow:

```
Your App                    Chucky Cloud                    Claude
   │                             │                            │
   │  createSession(mcpServers)  │                            │
   │────────────────────────────►│                            │
   │                             │                            │
   │  send("Get weather in Tokyo") │    prompt + tools        │
   │────────────────────────────►│───────────────────────────►│
   │                             │                            │
   │                             │     tool_call: get_weather │
   │   tool_call: get_weather    │◄───────────────────────────│
   │◄────────────────────────────│                            │
   │                             │                            │
   │   [your handler executes]   │                            │
   │   → fetchWeatherAPI(tokyo)  │                            │
   │   → returns "Sunny, 22°C"   │                            │
   │                             │                            │
   │   tool_result: "Sunny, 22°C"│     tool_result            │
   │────────────────────────────►│───────────────────────────►│
   │                             │                            │
   │                             │     "It's sunny and 22°C"  │
   │   assistant message         │◄───────────────────────────│
   │◄────────────────────────────│                            │
```

This means your tools have access to everything in your app: databases, APIs, the DOM (in browser), local storage, etc.

## Creating Tools

A tool is an object with four properties:

```typescript
const myTool = {
  name: 'tool_name',           // Unique identifier
  description: 'What it does', // Helps Claude decide when to use it
  inputSchema: { ... },        // JSON Schema for parameters
  handler: async (input) => {  // Function that runs in YOUR app
    // ... your code ...
    return { content: [{ type: 'text', text: 'result' }] };
  }
};
```

### Example: Weather Tool

```typescript
const weatherTool = {
  name: 'get_weather',
  description: 'Get current weather for a city',
  inputSchema: {
    type: 'object',
    properties: {
      city: { type: 'string', description: 'City name' },
      unit: { type: 'string', enum: ['celsius', 'fahrenheit'] },
    },
    required: ['city'],
  },
  handler: async ({ city, unit = 'celsius' }) => {
    const weather = await fetchWeatherAPI(city, unit);
    return {
      content: [{
        type: 'text',
        text: `${city}: ${weather.temp}°${unit === 'celsius' ? 'C' : 'F'}, ${weather.condition}`
      }]
    };
  }
};
```

## Using Tools

Tools must be wrapped in an MCP server and passed to `createSession`:

```typescript
import { ChuckyClient, getAssistantText } from '@chucky.cloud/sdk';

const client = new ChuckyClient({ token });

const session = client.createSession({
  model: 'claude-sonnet-4-5-20250929',
  mcpServers: [{
    name: 'my-tools',
    version: '1.0.0',
    tools: [weatherTool, searchTool, calculatorTool]
  }],
});

await session.send('What is the weather in Paris?');

for await (const msg of session.stream()) {
  if (msg.type === 'assistant') {
    console.log(getAssistantText(msg));
  }
}

session.close();
```

## Input Schema

Use JSON Schema to define tool parameters:

```typescript
const searchTool = {
  name: 'search_products',
  description: 'Search for products in the catalog',
  inputSchema: {
    type: 'object',
    properties: {
      // Required string
      query: {
        type: 'string',
        description: 'Search query',
      },
      // Optional number with constraints
      limit: {
        type: 'number',
        description: 'Max results (1-50)',
        minimum: 1,
        maximum: 50,
      },
      // Enum (fixed options)
      sort: {
        type: 'string',
        enum: ['relevance', 'price', 'rating'],
        description: 'Sort order',
      },
      // Array of strings
      tags: {
        type: 'array',
        items: { type: 'string' },
        description: 'Filter by tags',
      },
    },
    required: ['query'],  // Only query is required
  },
  handler: async ({ query, limit = 10, sort = 'relevance', tags = [] }) => {
    const results = await db.products.search({ query, limit, sort, tags });
    return { content: [{ type: 'text', text: JSON.stringify(results) }] };
  }
};
```

## Tool Results

Handlers return a `ToolResult` object:

```typescript
// Success with text
return {
  content: [{ type: 'text', text: 'Operation completed' }]
};

// Error
return {
  content: [{ type: 'text', text: 'Error: File not found' }],
  isError: true
};

// Image (base64)
return {
  content: [{
    type: 'image',
    data: base64ImageData,
    mimeType: 'image/png'
  }]
};

// Multiple content blocks
return {
  content: [
    { type: 'text', text: 'Here is the chart:' },
    { type: 'image', data: chartBase64, mimeType: 'image/png' },
  ]
};
```

### Result Helpers

```typescript
import { textResult, errorResult, imageResult } from '@chucky.cloud/sdk';

return textResult('Success!');
// → { content: [{ type: 'text', text: 'Success!' }] }

return errorResult('Something went wrong');
// → { content: [{ type: 'text', text: 'Something went wrong' }], isError: true }

return imageResult(base64Data, 'image/png');
// → { content: [{ type: 'image', data: '...', mimeType: 'image/png' }] }
```

## Browser Tools

In the browser, tools have access to the DOM and browser APIs:

```typescript
const highlightTool = {
  name: 'highlight_element',
  description: 'Highlight an element on the page',
  inputSchema: {
    type: 'object',
    properties: {
      selector: { type: 'string', description: 'CSS selector' },
      color: { type: 'string', description: 'Highlight color' },
    },
    required: ['selector'],
  },
  handler: async ({ selector, color = 'yellow' }) => {
    const element = document.querySelector(selector);
    if (!element) {
      return { content: [{ type: 'text', text: 'Element not found' }], isError: true };
    }
    element.style.backgroundColor = color;
    return { content: [{ type: 'text', text: `Highlighted ${selector}` }] };
  }
};

const showModalTool = {
  name: 'show_modal',
  description: 'Show a modal dialog to the user',
  inputSchema: {
    type: 'object',
    properties: {
      title: { type: 'string' },
      message: { type: 'string' },
    },
    required: ['message'],
  },
  handler: async ({ title, message }) => {
    // Your app's modal component
    await showModal({ title, message });
    return { content: [{ type: 'text', text: 'Modal shown' }] };
  }
};
```

## Best Practices

<AccordionGroup>
  <Accordion title="Write clear descriptions">
    Claude uses descriptions to decide when to use tools. Be specific:

    ```typescript
    // Good
    description: 'Search for products by name, category, or price range. Returns up to 10 matching products.'

    // Bad
    description: 'Search products'
    ```
  </Accordion>

  <Accordion title="Handle errors gracefully">
    Return informative errors so Claude can respond appropriately:

    ```typescript
    handler: async ({ id }) => {
      try {
        const item = await database.find(id);
        if (!item) {
          return errorResult(`Item ${id} not found`);
        }
        return textResult(JSON.stringify(item));
      } catch (err) {
        return errorResult(`Database error: ${err.message}`);
      }
    }
    ```
  </Accordion>

  <Accordion title="Keep tools focused">
    Each tool should do one thing well:

    ```typescript
    // Good: Separate tools
    const searchProducts = { name: 'search_products', ... };
    const getProductDetails = { name: 'get_product', ... };
    const addToCart = { name: 'add_to_cart', ... };

    // Bad: One mega-tool
    const productOperations = { name: 'product_ops', ... };
    ```
  </Accordion>

  <Accordion title="Validate inputs">
    Even with schema validation, validate in your handler:

    ```typescript
    handler: async ({ email }) => {
      if (!isValidEmail(email)) {
        return errorResult('Invalid email format');
      }
      // ...
    }
    ```
  </Accordion>
</AccordionGroup>

## Complete Example

```typescript
import { createToken, createBudget, ChuckyClient, getAssistantText } from '@chucky.cloud/sdk';

// Define tools
const getCurrentTime = {
  name: 'get_current_time',
  description: 'Get the current date and time',
  inputSchema: { type: 'object', properties: {} },
  handler: async () => ({
    content: [{ type: 'text', text: new Date().toISOString() }]
  })
};

const searchUsers = {
  name: 'search_users',
  description: 'Search for users in the database',
  inputSchema: {
    type: 'object',
    properties: {
      query: { type: 'string', description: 'Name or email to search' },
      limit: { type: 'number', description: 'Max results' },
    },
    required: ['query'],
  },
  handler: async ({ query, limit = 10 }) => {
    const users = await db.users.search(query, { limit });
    return { content: [{ type: 'text', text: JSON.stringify(users, null, 2) }] };
  }
};

const sendNotification = {
  name: 'send_notification',
  description: 'Send a notification to a user',
  inputSchema: {
    type: 'object',
    properties: {
      userId: { type: 'string' },
      message: { type: 'string' },
    },
    required: ['userId', 'message'],
  },
  handler: async ({ userId, message }) => {
    await notificationService.send(userId, message);
    return { content: [{ type: 'text', text: `Notification sent to ${userId}` }] };
  }
};

// Create session with tools
const token = await createToken({
  userId: 'admin',
  projectId: process.env.PROJECT_ID,
  secret: process.env.HMAC_SECRET,
  budget: createBudget({ aiDollars: 5, computeHours: 1, window: 'day' }),
});

const client = new ChuckyClient({ token });
const session = client.createSession({
  model: 'claude-sonnet-4-5-20250929',
  systemPrompt: 'You are a helpful admin assistant.',
  mcpServers: [{
    name: 'admin-tools',
    version: '1.0.0',
    tools: [getCurrentTime, searchUsers, sendNotification]
  }],
});

// Claude can now use these tools
await session.send('Find all users named John and send them a welcome message');

for await (const msg of session.stream()) {
  if (msg.type === 'assistant') {
    console.log(getAssistantText(msg));
  }
  if (msg.type === 'result') {
    console.log('Cost:', msg.total_cost_usd);
  }
}

session.close();
```
